webpackJsonp([1],{"20Bb":function(e,t){},"7xIN":function(e,t){},"80YH":function(e,t){},CuRo:function(e,t){},G0Hr:function(e,t){},MqOD:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=s("VU/8")({name:"App"},r,!1,function(e){s("dQyJ")},null,null).exports,n=s("/ocq"),o={name:"Login",data:function(){return{url:this.url,axios:this.axios,username:"",email:"",password:"",captcha:"",activeName:"",storage:this.storage,is_ok:!1,captcha_button:"获取验证码"}},methods:{login:function(e){var t=this;if("email"!=e||this.check_email(this.email)){if("username"==e){if(!this.username)return void this.$message({message:"用户名不能为空",type:"error",center:!0});if(!this.password)return void this.$message({message:"密码不能为空",type:"error",center:!0})}var s={type:e,username:this.username,password:this.password,email:this.email,captcha:this.captcha};this.axios({baseURL:this.url,url:"api/v1/login/",method:"post",data:s}).then(function(e){e.data.errcode?t.$message({message:e.data.errmsg,type:"error",center:!0}):(t.storage.setItem("userId",e.data.data.id),t.storage.setItem("token",e.data.token),t.$router.push({path:"/home/"}))},function(e){t.$message({message:e.response.data,type:"error",center:!0})})}},get_captcha:function(){var e=this;if(this.check_email(this.email)){var t={email:this.email};this.axios({baseURL:this.url,url:"api/v1/captcha/",method:"get",params:t}).then(function(t){if(t.data.errcode)e.$message({message:t.data.errmsg,type:"error",center:!0});else{e.$message({message:"发送成功",type:"success",center:!0});var s=60;e.captcha_button=s+"s";var a=setInterval(function(){s<=1?(e.is_ok=!1,clearInterval(a),e.captcha_button="获取验证码"):(s--,e.captcha_button=s+"s")},1e3)}},function(t){e.$message({message:t.response.data,type:"error",center:!0})})}},check_email:function(e){return!!/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/.test(e)||(this.$message({message:"邮箱格式不对，请重新输入",type:"error",center:!0}),!1)}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._m(0),e._v(" "),s("el-tabs",{attrs:{type:"border-card",value:"first"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"用户名登陆"}},[s("el-input",{attrs:{placeholder:"请输入用户名",clearable:"",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),s("el-input",{attrs:{placeholder:"请输入登陆密码","show-password":"",clearable:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),s("el-button",{attrs:{id:"login",type:"primary"},on:{click:function(t){return e.login("username")}}},[e._v("登陆")])],1),e._v(" "),s("el-tab-pane",{attrs:{label:"邮箱登陆",name:"second"}},[s("el-input",{attrs:{type:"email",placeholder:"请输入邮箱",clearable:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),s("el-input",{attrs:{placeholder:"请输入验证码",clearable:""},model:{value:e.captcha,callback:function(t){e.captcha=t},expression:"captcha"}},[s("el-button",{staticStyle:{margin:"-10px 0"},attrs:{slot:"append",disabled:e.is_ok},on:{click:e.get_captcha},slot:"append"},[e._v(e._s(e.captcha_button))])],1),e._v(" "),s("el-button",{attrs:{id:"login",type:"primary"},on:{click:function(t){return e.login("email")}}},[e._v("登陆")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"login_img"}},[t("img",{attrs:{src:s("xzo/"),alt:""}})])}]};var c=s("VU/8")(o,l,!1,function(e){s("MqOD")},"data-v-cdee9f16",null).exports,d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",[s("el-header",[s("el-menu",{attrs:{mode:"horizontal","default-active":e.$route.path,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b",router:""}},[s("el-menu-item",{attrs:{index:"/home/user"}},[s("i",{staticClass:"el-icon-thirdshanghuhaopeizhi"}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("用户中心")])]),e._v(" "),s("el-menu-item",{attrs:{index:"/home/project"}},[s("i",{staticClass:"el-icon-menu"}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("项目中心")])]),e._v(" "),s("el-menu-item",{attrs:{index:"/home/webManager/"}},[s("i",{staticClass:"el-icon-thirdhoutaicaozuorizhi-"}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("前端测试")])]),e._v(" "),s("el-menu-item",{attrs:{index:"/home/apiManager/"}},[s("i",{staticClass:"el-icon-thirdduanxintongji-"}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("后端测试")])]),e._v(" "),s("el-menu-item",{attrs:{index:"/home/record/"}},[s("i",{staticClass:"el-icon-document"}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("测试记录")])])],1)],1),e._v(" "),s("el-main",[s("router-view")],1)],1)},staticRenderFns:[]};var u=s("VU/8")({name:"Home"},d,!1,function(e){s("vPTb")},"data-v-23d92d5a",null).exports,p={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-collapse",{attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-collapse-item",{attrs:{title:"个人资料",name:"1"}},[s("p",[e._v("用户名："+e._s(e.username))]),e._v(" "),s("p",[e._v("邮箱    ："+e._s(e.email))])]),e._v(" "),s("el-collapse-item",{attrs:{title:"修改用户名",name:"2"}},[s("br"),e._v(" "),s("el-input",{attrs:{placeholder:"请输入用户名",clearable:""},model:{value:e.username_new,callback:function(t){e.username_new=t},expression:"username_new"}}),e._v(" "),s("br"),s("br"),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.update_username}},[e._v("确认")])],1),e._v(" "),s("el-collapse-item",{attrs:{title:"修改密码",name:"3"}},[s("br"),e._v(" "),s("el-input",{attrs:{placeholder:"请输入密码，确保两次输入一致","show-password":"",clearable:""},model:{value:e.password_1,callback:function(t){e.password_1=t},expression:"password_1"}},[s("template",{slot:"prepend"},[e._v("密码")])],2),e._v(" "),s("br"),s("br"),e._v(" "),s("el-input",{attrs:{placeholder:"请输入密码，确保两次输入一致","show-password":"",clearable:""},model:{value:e.password_2,callback:function(t){e.password_2=t},expression:"password_2"}},[s("template",{slot:"prepend"},[e._v("密码")])],2),e._v(" "),s("br"),s("br"),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.update_password}},[e._v("修改密码")])],1)],1),e._v(" "),s("br"),s("br"),e._v(" "),s("el-button",{attrs:{type:"danger"},on:{click:e.logout}},[e._v("注销用户")])],1)},staticRenderFns:[]};var h=s("VU/8")({name:"User",data:function(){return{axios:this.axios,url:this.url,userId:this.storage.getItem("userId"),token:this.storage.getItem("token"),username:"",username_new:"",email:"",password_1:"",password_2:"",activeName:"1"}},methods:{get_user:function(){var e=this,t={userId:this.userId,token:this.token};this.axios({baseURL:this.url,url:"v1/user/"+this.userId+"/",method:"get",params:t}).then(function(t){e.username=t.data.data.username,e.email=t.data.data.email},function(t){e.$message({message:"匿名用户，请先登录",type:"error",center:!0,showClose:!0}),e.$router.push("/")})},update_username:function(){var e=this,t={userId:this.userId,token:this.token},s={username:this.username_new};this.axios({baseURL:this.url,url:"v1/user/"+this.userId+"/",method:"patch",params:t,data:s}).then(function(t){t.data.errcode?e.$message({message:"修改失败",type:"error",center:!0,showClose:!0}):(e.$message({message:"修改成功",type:"success",center:!0,showClose:!0}),e.username=e.username_new,e.username_new="")},function(t){e.$message({message:t.response.data,type:"error",center:!0})})},update_password:function(){var e=this;if(this.password_1&&this.password_1==this.password_2){var t={userId:this.userId,token:this.token},s={password:this.password_1};this.axios({baseURL:this.url,url:"v1/user/"+this.userId+"/",method:"patch",params:t,data:s}).then(function(t){t.data.errcode?e.$message({message:"修改失败",type:"error",center:!0,showClose:!0}):e.$message({message:"修改成功",type:"success",center:!0,showClose:!0})},function(t){e.$message({message:t.response.data,type:"error",center:!0})})}else this.$message({message:"两次密码不一致，请重新输入",type:"error",center:!0,showClose:!0});this.password_1=this.password_2=""},logout:function(){this.storage.removeItem("userId"),this.storage.removeItem("token"),this.$router.push("/")}},beforeCreate:function(){},created:function(){this.get_user()}},p,!1,function(e){s("Y7Ud")},"data-v-2b4af8bb",null).exports,m={name:"Project",data:function(){return{axios:this.axios,url:this.url,userId:this.storage.getItem("userId"),token:this.storage.getItem("token"),testBtn:"开始测试",loading:!1,passText:"PASS",failText:"FAIL",proname:"",prodes:"",projects:[],search:"",pre:"",next:"",isNextDisabled:!1,isPreDisabled:!1,dialogFormVisible:!1,editObj:{id:"",proname:"",prodes:""}}},methods:{projectTest:function(e){var t=this;this.$message({message:"测试开始",type:"success",center:!0,showClose:!0}),this.passText=this.failText='<p class="el-icon-loading"></p>';var s={userId:this.userId,token:this.token,projectId:e};this.axios({baseURL:this.url,url:"/api/v1/projectTest/",method:"get",params:s}).then(function(e){e.data.errcode?t.$message({message:e.data.errmsg,type:"error",center:!0,showClose:!0}):t.$message({message:"PASS",type:"success",center:!0,showClose:!0}),t.passText="PASS",t.failText="FAIL",t.get_projects()},function(e){t.$message({message:e.response.data,type:"error",center:!0,showClose:!0}),t.passText="PASS",t.failText="FAIL",t.testBtn="开始测试"})},get_projects:function(){var e=this,t={userId:this.userId,token:this.token};this.axios({baseURL:this.url,url:"api/v1/project/",method:"get",params:t}).then(function(t){e.projects=t.data.results,e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0},function(t){e.$message({message:"匿名用户，请先登录",type:"error",center:!0,showClose:!0}),e.$router.push("/")})},open_edit:function(e){this.dialogFormVisible=!0,this.editObj.id=e.id,this.editObj.proname=e.proname,this.editObj.prodes=e.prodes},handleEdit:function(e){var t=this;this.dialogFormVisible=!1;var s={userId:this.userId,token:this.token};this.axios({baseURL:this.url,url:"api/v1/project/"+e.id+"/",method:"patch",params:s,data:e}).then(function(e){e.data.errcode?t.$message({message:"修改失败",type:"error",center:!0,showClose:!0}):(t.$message({message:"修改成功",type:"success",center:!0,showClose:!0}),t.get_projects())},function(e){t.$message({message:e.response.data,type:"error",center:!0,showClose:!0})})},handleDelete:function(e,t){var s=this;this.$confirm("此操作将永久删除该项, 是否继续?","提示",{distinguishCancelAndClose:!0,type:"warning",confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var e={userId:s.userId,token:s.token};s.axios({baseURL:s.url,url:"api/v1/project/"+t.id+"/",method:"delete",params:e}).then(function(e){e.data.errcode?s.$message({message:"删除失败",type:"error",center:!0,showClose:!0}):s.$message({message:"删除成功",type:"success",center:!0,showClose:!0}),s.get_projects()},function(e){s.$message({message:e.response.data,type:"error",center:!0,showClose:!0})})}).catch(function(e){})},new_product:function(){var e=this,t={proname:this.proname,prodes:this.prodes,user:this.userId},s={userId:this.userId,token:this.token};this.axios({baseURL:this.url,url:"api/v1/project/",method:"post",params:s,data:t}).then(function(t){t.data.errcode?e.$message({message:"新建失败",type:"error",center:!0,showClose:!0}):e.$message({message:"新建成功",type:"success",center:!0,showClose:!0})},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})}),this.get_projects(),this.proname="",this.prodes=""},get_pre:function(){var e=this;this.axios({url:this.pre,method:"get"}).then(function(t){t.data.errcode?e.$message({message:"加载失败",type:"error",center:!0,showClose:!0}):(e.projects=t.data.results,e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0)},function(t){e.$message({message:"匿名用户，请先登录",type:"error",center:!0,showClose:!0}),e.$router.push("/")})},get_next:function(){var e=this;this.axios({url:this.next,method:"get"}).then(function(t){t.data.errcode?e.$message({message:"加载失败",type:"error",center:!0,showClose:!0}):(e.projects=t.data.results,e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0)},function(t){e.$message({message:"匿名用户，请先登录",type:"error",center:!0,showClose:!0}),e.$router.push("/")})},go_webTest:function(e){var t={projectId:e.id};this.$router.push({path:"/home/webManager/",query:t})},go_apiTest:function(e){var t={projectId:e.id};this.$router.push({path:"/home/apiManager/",query:t})}},beforeCreate:function(){},created:function(){this.get_projects()},filters:{dateFormat:function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}}},b={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{attrs:{id:"add_project"}},[s("el-button",{attrs:{type:"primary"},on:{click:e.new_product}},[e._v("新建项目")]),e._v(" "),s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"项目名称"},model:{value:e.proname,callback:function(t){e.proname=t},expression:"proname"}}),e._v(" "),s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"项目描述"},model:{value:e.prodes,callback:function(t){e.prodes=t},expression:"prodes"}}),e._v(" "),s("br"),s("br")],1),e._v(" "),s("el-table",{attrs:{stripe:"",border:"",data:e.projects.filter(function(t){return!e.search||t.proname.toLowerCase().includes(e.search.toLowerCase())||t.prodes.toLowerCase().includes(e.search.toLowerCase())}),"empty-text":"暂无项目","header-cell-style":{background:"#ddd"},"highlight-current-row":""}},[s("el-table-column",{attrs:{label:"项目名称",align:"center",prop:"proname",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{label:"项目描述",align:"center",prop:"prodes"}}),e._v(" "),s("el-table-column",{attrs:{label:"后端",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("a",{attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.go_apiTest(t.row)}}},[t.row.apiresult?s("p",{staticStyle:{color:"green"}},[e._v("PASS")]):s("p",{staticStyle:{color:"red"}},[e._v("FAIL")])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"前端",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("a",{attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.go_webTest(t.row)}}},[t.row.webresult?s("p",{staticStyle:{color:"green"}},[e._v("PASS")]):s("p",{staticStyle:{color:"red"}},[e._v("FAIL")])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"测试结果",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("a",{attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.projectTest(t.row.id)}}},[t.row.result?s("p",{staticStyle:{color:"green"},domProps:{innerHTML:e._s(e.passText)}}):s("p",{staticStyle:{color:"red"},domProps:{innerHTML:e._s(e.failText)}})])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"最近修改",align:"center",prop:"update_time",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",[e._v(e._s(e._f("dateFormat")(t.row.update_time)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[s("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[s("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(s){return e.open_edit(t.row)}}}),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}})]}}])})],1),e._v(" "),s("br"),e._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{attrs:{type:"primary",disabled:e.isPreDisabled},on:{click:e.get_pre}},[e._v("上一页")]),e._v(" "),s("el-button",{attrs:{type:"primary",disabled:e.isNextDisabled},on:{click:e.get_next}},[e._v("下一页")])],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",[s("el-form-item",{attrs:{label:"项目名称","label-width":"120px"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.editObj.proname,callback:function(t){e.$set(e.editObj,"proname",t)},expression:"editObj.proname"}})],1)],1),e._v(" "),s("el-form",[s("el-form-item",{attrs:{label:"项目描述","label-width":"120px"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.editObj.prodes,callback:function(t){e.$set(e.editObj,"prodes",t)},expression:"editObj.prodes"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleEdit(e.editObj)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var g=s("VU/8")(m,b,!1,function(e){s("m8bA")},"data-v-43e0c264",null).exports,f={name:"WebManager",data:function(){return{axios:this.axios,url:this.url,userId:this.storage.getItem("userId"),token:this.storage.getItem("token"),testBtn:"开始测试",loading:!1,webname:"",webdes:"",weburl:"",search:"",webManagers:[],project_options:[],pre:"",next:"",isNextDisabled:!1,isPreDisabled:!1,projectId:this.$route.query.projectId,dialogFormVisible:!1,editObj:{id:"",webname:"",webdes:"",weburl:""}}},methods:{go_back:function(){this.$router.back(-1)},apiManagerTest:function(){var e=this;this.loading=!0,this.testBtn="测试中...";var t={userId:this.userId,token:this.token,projectId:this.projectId};this.axios({baseURL:this.url,url:"/api/v1/webManagerTest/",method:"get",params:t}).then(function(t){t.data.errcode?e.$message({message:t.data.errmsg,type:"error",center:!0,showClose:!0}):e.$message({message:"PASS",type:"success",center:!0,showClose:!0}),e.loading=!1,e.testBtn="开始测试",e.get_webManagers()},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0}),e.get_webManagers(),e.loading=!1,e.testBtn="开始测试"})},get_webManagers:function(){var e=this,t="api/v1/webManager/";this.$route.query.projectId&&(t=t+"?project="+this.$route.query.projectId);var s={userId:this.userId,token:this.token};this.axios({baseURL:this.url,url:t,method:"get",params:s}).then(function(t){e.webManagers=t.data.results,e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0},function(t){e.$message({message:"匿名用户，请先登录",type:"error",center:!0,showClose:!0}),e.$router.push("/")})},open_edit:function(e){this.dialogFormVisible=!0,this.editObj.id=e.id,this.editObj.webname=e.webname,this.editObj.webdes=e.webdes,this.editObj.weburl=e.weburl},handleEdit:function(e){var t=this;this.dialogFormVisible=!1;var s={userId:this.userId,token:this.token};this.axios({baseURL:this.url,url:"api/v1/webManager/"+e.id+"/",method:"patch",params:s,data:e}).then(function(e){e.data.errcode?t.$message({message:"修改失败",type:"error",center:!0,showClose:!0}):(t.$message({message:"修改成功",type:"success",center:!0,showClose:!0}),t.get_webManagers())},function(e){t.$message({message:e.response.data,type:"error",center:!0,showClose:!0})})},handleDelete:function(e,t){var s=this;this.$confirm("此操作将永久删除该项, 是否继续?","提示",{distinguishCancelAndClose:!0,type:"warning",confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var e={userId:s.userId,token:s.token};s.axios({baseURL:s.url,url:"api/v1/webManager/"+t.id+"/",method:"delete",params:e}).then(function(e){e.data.errcode?s.$message({message:"删除失败",type:"error",center:!0,showClose:!0}):(s.$message({message:"删除成功",type:"success",center:!0,showClose:!0}),s.get_webManagers())},function(e){s.$message({message:e.response.data,type:"error",center:!0,showClose:!0})})}).catch(function(){})},new_webcase:function(){var e=this,t={webname:this.webname,webdes:this.webdes,weburl:this.weburl,user:this.userId,project:this.projectId},s={userId:this.userId,token:this.token};this.axios({baseURL:this.url,url:"api/v1/webManager/",method:"post",params:s,data:t}).then(function(t){t.data.errcode?e.$message({message:"添加失败",type:"error",center:!0,showClose:!0}):(e.$message({message:"添加成功",type:"success",center:!0,showClose:!0}),e.get_webManagers())},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})}),this.webname="",this.webdes="",this.weburl=""},get_pre:function(){var e=this;this.axios.get(this.pre).then(function(t){t.data.errcode?e.$message({message:"加载失败",type:"error",center:!0,showClose:!0}):(e.webManagers=t.data.results,e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0)},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})})},get_next:function(){var e=this;this.axios.get(this.next).then(function(t){t.data.errcode?e.$message({message:"加载失败",type:"error",center:!0,showClose:!0}):(e.webManagers=t.data.results,e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0)},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})})},go_webTest:function(e){var t={object_id:e.id,content_type:e.contenttype,weburl:e.weburl};this.$router.push({path:"/home/webType/",query:t})},get_projects:function(){var e=this,t={userId:this.userId,token:this.token};this.axios({baseURL:this.url,url:"api/v1/project/",method:"get",params:t}).then(function(t){if(t.data.errcode)e.$message({message:"加载失败",type:"error",center:!0,showClose:!0});else{e.project_options=[];for(var s=0;s<t.data.results.length;s++){var a={value:t.data.results[s].id,label:t.data.results[s].proname};e.project_options.push(a)}e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0}},function(t){e.$message({message:"匿名用户，请先登录",type:"error",center:!0,showClose:!0}),e.$router.push("/")})}},watch:{"$route.query.projectId":function(e){e||(this.get_projects(),this.get_webManagers())}},beforeCreate:function(){},created:function(){this.get_webManagers(),this.$route.query.projectId||this.get_projects()},filters:{dateFormat:function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}}},v={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[this.$route.query.projectId?s("div",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.go_back(t)}}},[s("i",{staticClass:"el-icon-d-arrow-left"}),e._v("返回上一级"),s("br"),s("br")])]):e._e(),e._v(" "),s("div",[s("el-button",{attrs:{type:"primary"},on:{click:e.new_webcase}},[e._v("添加测试")]),e._v(" "),s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入名称"},model:{value:e.webname,callback:function(t){e.webname=t},expression:"webname"}}),e._v(" "),s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入描述"},model:{value:e.webdes,callback:function(t){e.webdes=t},expression:"webdes"}}),e._v(" "),s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入URL"},model:{value:e.weburl,callback:function(t){e.weburl=t},expression:"weburl"}}),e._v(" "),this.$route.query.projectId?e._e():s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.projectId,callback:function(t){e.projectId=t},expression:"projectId"}},e._l(e.project_options,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),this.$route.query.projectId?s("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",loading:e.loading},on:{click:e.apiManagerTest}},[e._v(e._s(e.testBtn))]):e._e(),e._v(" "),s("br"),s("br")],1),e._v(" "),s("el-table",{attrs:{stripe:"",border:"",data:e.webManagers.filter(function(t){return!e.search||t.webname.toLowerCase().includes(e.search.toLowerCase())||t.webdes.toLowerCase().includes(e.search.toLowerCase())}),"empty-text":"暂无项目","header-cell-style":{background:"#ddd"},"highlight-current-row":""}},[s("el-table-column",{attrs:{label:"名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("a",{attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.go_webTest(t.row)}}},[s("p",[e._v(e._s(t.row.webname))])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"描述",align:"center",prop:"webdes"}}),e._v(" "),s("el-table-column",{attrs:{label:"URL",align:"center",prop:"weburl"}}),e._v(" "),s("el-table-column",{attrs:{label:"项目",align:"center",prop:"proname"}}),e._v(" "),s("el-table-column",{attrs:{label:"测试结果",align:"center",prop:"result"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.result?s("p",{staticStyle:{color:"green"}},[e._v("PASS")]):s("p",{staticStyle:{color:"red"}},[e._v("FAIL")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"最近修改",align:"center",prop:"update_time"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",[e._v(e._s(e._f("dateFormat")(t.row.update_time)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[s("el-input",{attrs:{size:"mini",placeholder:"输入名称关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[s("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(s){return e.open_edit(t.row)}}}),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}})]}}])})],1),e._v(" "),s("br"),e._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{attrs:{type:"primary",disabled:e.isPreDisabled},on:{click:e.get_pre}},[e._v("上一页")]),e._v(" "),s("el-button",{attrs:{type:"primary",disabled:e.isNextDisabled},on:{click:e.get_next}},[e._v("下一页")])],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",[s("el-form-item",{attrs:{label:"名称","label-width":"120px"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.editObj.webname,callback:function(t){e.$set(e.editObj,"webname",t)},expression:"editObj.webname"}})],1)],1),e._v(" "),s("el-form",[s("el-form-item",{attrs:{label:"描述","label-width":"120px"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.editObj.webdes,callback:function(t){e.$set(e.editObj,"webdes",t)},expression:"editObj.webdes"}})],1)],1),e._v(" "),s("el-form",[s("el-form-item",{attrs:{label:"URL","label-width":"120px"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.editObj.weburl,callback:function(t){e.$set(e.editObj,"weburl",t)},expression:"editObj.weburl"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleEdit(e.editObj)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var _=s("VU/8")(f,v,!1,function(e){s("G0Hr")},"data-v-90f80722",null).exports,y={name:"ApiManager",data:function(){return{axios:this.axios,url:this.url,userId:this.storage.getItem("userId"),token:this.storage.getItem("token"),testBtn:"开始测试",loading:!1,apiname:"",apides:"",apiurl:"",search:"",apiManagers:[],project_options:[],pre:"",next:"",projectId:this.$route.query.projectId,projectName:this.$route.query.projectName,isNextDisabled:!1,isPreDisabled:!1,dialogFormVisible:!1,editObj:{id:"",apiname:"",apides:"",apiurl:""}}},methods:{go_back:function(){this.$router.back(-1)},apiManagerTest:function(){var e=this;this.loading=!0,this.testBtn="测试中...";var t={userId:this.userId,token:this.token,projectId:this.projectId};this.axios({baseURL:this.url,url:"/api/v1/apiManagerTest/",method:"get",params:t}).then(function(t){t.data.errcode?e.$message({message:t.data.errmsg,type:"error",center:!0,showClose:!0}):e.$message({message:"PASS",type:"success",center:!0,showClose:!0}),e.loading=!1,e.testBtn="开始测试",e.get_apiManagers()},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0}),e.get_apiManagers(),e.loading=!1,e.testBtn="开始测试"})},get_apiManagers:function(){var e=this,t="api/v1/apiManager/";this.$route.query.projectId&&(t=t+"?project="+this.$route.query.projectId);var s={userId:this.userId,token:this.token};this.axios({baseURL:this.url,url:t,method:"get",params:s}).then(function(t){e.apiManagers=t.data.results,e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0},function(t){e.$message({message:"匿名用户，请先登录",type:"error",center:!0,showClose:!0}),e.$router.push("/")})},open_edit:function(e){this.dialogFormVisible=!0,this.editObj.id=e.id,this.editObj.apiname=e.apiname,this.editObj.apides=e.apides,this.editObj.apiurl=e.apiurl},handleEdit:function(e){var t=this;this.dialogFormVisible=!1;var s={userId:this.userId,token:this.token};this.axios({baseURL:this.url,url:"api/v1/apiManager/"+e.id+"/",method:"patch",params:s,data:e}).then(function(e){e.data.errcode?t.$message({message:"修改失败",type:"error",center:!0,showClose:!0}):(t.$message({message:"修改成功",type:"success",center:!0,showClose:!0}),t.get_apiManagers())},function(e){t.$message({message:e.response.data,type:"error",center:!0,showClose:!0})})},handleDelete:function(e,t){var s=this;this.$confirm("此操作将永久删除该项, 是否继续?","提示",{distinguishCancelAndClose:!0,type:"warning",confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var e={userId:s.userId,token:s.token};s.axios({baseURL:s.url,url:"api/v1/apiManager/"+t.id+"/",method:"delete",params:e}).then(function(e){e.data.errcode?s.$message({message:"删除失败",type:"error",center:!0,showClose:!0}):(s.$message({message:"删除成功",type:"success",center:!0,showClose:!0}),s.get_apiManagers())},function(e){s.$message({message:e.response.data,type:"error",center:!0,showClose:!0})})}).catch(function(){})},new_webcase:function(){var e=this,t={apiname:this.apiname,apides:this.apides,apiurl:this.apiurl,user:this.userId,project:this.projectId},s={userId:this.userId,token:this.token};this.axios({baseURL:this.url,url:"api/v1/apiManager/",method:"post",params:s,data:t}).then(function(t){t.data.errcode?e.$message({message:"新建失败",type:"error",center:!0,showClose:!0}):(e.$message({message:"添加成功",type:"success",center:!0,showClose:!0}),e.get_apiManagers())},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})}),this.apiname="",this.apides="",this.apiurl=""},get_pre:function(){var e=this;this.axios.get(this.pre).then(function(t){t.data.errcode?e.$message({message:"加载失败",type:"error",center:!0,showClose:!0}):(e.apiManagers=t.data.results,e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0)},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})})},get_next:function(){var e=this;this.axios.get(this.next).then(function(t){t.data.errcode?e.$message({message:"加载失败",type:"error",center:!0,showClose:!0}):(e.apiManagers=t.data.results,e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0)},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})})},go_apiTest:function(e){var t={object_id:e.id,content_type:e.contenttype,apiurl:e.apiurl};this.$router.push({path:"/home/ApiType/",query:t})},get_projects:function(){var e=this,t={userId:this.userId,token:this.token};this.axios({baseURL:this.url,url:"api/v1/project/",method:"get",params:t}).then(function(t){if(t.data.errcode)e.$message({message:"加载失败",type:"error",center:!0,showClose:!0});else{e.project_options=[];for(var s=0;s<t.data.results.length;s++){var a={value:t.data.results[s].id,label:t.data.results[s].proname};e.project_options.push(a)}e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0}},function(t){e.$message({message:"匿名用户，请先登录",type:"error",center:!0,showClose:!0}),e.$router.push("/")})}},watch:{"$route.query.projectId":function(e){e||(this.get_projects(),this.get_apiManagers())}},beforeCreate:function(){},created:function(){this.get_apiManagers(),this.$route.query.projectId||this.get_projects()},filters:{dateFormat:function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}}},w={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[this.$route.query.projectId?s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.go_back(t)}}},[s("i",{staticClass:"el-icon-d-arrow-left"}),e._v("返回上一级"),s("br"),s("br")]):e._e(),e._v(" "),s("div",[s("el-button",{attrs:{type:"primary"},on:{click:e.new_webcase}},[e._v("添加模块")]),e._v(" "),s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入名称"},model:{value:e.apiname,callback:function(t){e.apiname=t},expression:"apiname"}}),e._v(" "),s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入描述"},model:{value:e.apides,callback:function(t){e.apides=t},expression:"apides"}}),e._v(" "),s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入URL"},model:{value:e.apiurl,callback:function(t){e.apiurl=t},expression:"apiurl"}}),e._v(" "),this.$route.query.projectId?e._e():s("el-select",{attrs:{placeholder:"请选择项目"},model:{value:e.projectId,callback:function(t){e.projectId=t},expression:"projectId"}},e._l(e.project_options,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),this.$route.query.projectId?s("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",loading:e.loading},on:{click:e.apiManagerTest}},[e._v(e._s(e.testBtn))]):e._e(),e._v(" "),s("br"),s("br")],1),e._v(" "),s("el-table",{attrs:{stripe:"",border:"",data:e.apiManagers.filter(function(t){return!e.search||t.apiname.toLowerCase().includes(e.search.toLowerCase())||t.apides.toLowerCase().includes(e.search.toLowerCase())}),"empty-text":"暂无项目","header-cell-style":{background:"#ddd"},"highlight-current-row":""}},[s("el-table-column",{attrs:{label:"名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("a",{attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.go_apiTest(t.row)}}},[s("p",[e._v(e._s(t.row.apiname))])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"描述",align:"center",prop:"apides"}}),e._v(" "),s("el-table-column",{attrs:{label:"URL",align:"center",prop:"apiurl"}}),e._v(" "),s("el-table-column",{attrs:{label:"项目",align:"center",prop:"proname"}}),e._v(" "),s("el-table-column",{attrs:{label:"测试结果",align:"center",prop:"result"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.result?s("p",{staticStyle:{color:"green"}},[e._v("PASS")]):s("p",{staticStyle:{color:"red"}},[e._v("FAIL")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"最近修改",align:"center",prop:"update_time"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",[e._v(e._s(e._f("dateFormat")(t.row.update_time)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[s("el-input",{attrs:{size:"mini",placeholder:"输入项目名称关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[s("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(s){return e.open_edit(t.row)}}}),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}})]}}])})],1),e._v(" "),s("br"),e._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{attrs:{type:"primary",disabled:e.isPreDisabled},on:{click:e.get_pre}},[e._v("上一页")]),e._v(" "),s("el-button",{attrs:{type:"primary",disabled:e.isNextDisabled},on:{click:e.get_next}},[e._v("下一页")])],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",[s("el-form-item",{attrs:{label:"名称","label-width":"120px"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.editObj.apiname,callback:function(t){e.$set(e.editObj,"apiname",t)},expression:"editObj.apiname"}})],1)],1),e._v(" "),s("el-form",[s("el-form-item",{attrs:{label:"描述","label-width":"120px"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.editObj.apides,callback:function(t){e.$set(e.editObj,"apides",t)},expression:"editObj.apides"}})],1)],1),e._v(" "),s("el-form",[s("el-form-item",{attrs:{label:"URL","label-width":"120px"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.editObj.apiurl,callback:function(t){e.$set(e.editObj,"apiurl",t)},expression:"editObj.apiurl"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleEdit(e.editObj)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var x=s("VU/8")(y,w,!1,function(e){s("qCPP")},"data-v-73a4b204",null).exports,k=s("mvHQ"),C=s.n(k),$={name:"ApiCase",data:function(){return{axios:this.axios,url:this.url,userId:this.storage.getItem("userId"),token:this.storage.getItem("token"),testBtn:"开始测试",loading:!1,apiname:"",apiurl:"",apiparams:{},apibody:{},search:"",apiCases:[],pre:"",next:"",error:{},testType:this.$route.query.testType,weburl:this.$route.query.weburl,isNextDisabled:!1,isPreDisabled:!1,dialogFormVisible:!1,editObj:{id:"",apiname:"",apimethod:"",apiurl:"",index:""},method_options:[{label:"get",value:"get"},{label:"post",value:"post"},{label:"patch",value:"patch"},{label:"delete",value:"delete"}],params:{},body:{},response:{}}},methods:{go_back:function(){this.$router.back(-1)},apiTest:function(e){var t=this;this.body[e.id].hasOwnProperty("timestamp")&&(this.body[e.id].timestamp=Date.parse(new Date)),console.log(this.params[e.id]),this.axios({baseURL:this.weburl,url:e.apiurl,method:e.apimethod,params:this.params[e.id],data:this.body[e.id]}).then(function(s){console.log(s.data),e.testdata=s.data,parseInt(s.data.errcode)==t.response[e.id].errcode?t.$message({message:"PASS",type:"success",center:!0,showClose:!0}):t.$message({message:"FAIL",type:"error",center:!0,showClose:!0})},function(t){console.log(t.response.data),e.testdata=t.response.data})},apiCaseTest:function(){var e=this;this.loading=!0,this.testBtn="测试中...";var t={userId:this.userId,token:this.token,testType:this.testType,url:this.weburl};this.axios({baseURL:this.url,url:"/api/v1/apiCaseTest/",method:"get",params:t}).then(function(t){t.data.errcode?e.$message({message:t.data.errmsg,type:"error",center:!0,showClose:!0}):e.$message({message:"PASS",type:"success",center:!0,showClose:!0}),e.loading=!1,e.testBtn="开始测试",e.get_apiCases()},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0}),e.loading=!1,e.testBtn="开始测试"})},removeLabel:function(e,t){var s=this;this.$confirm("提交修改后将永久删除, 是否继续?","提示",{distinguishCancelAndClose:!0,type:"warning",confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){s.$delete(e,t)}).catch(function(){})},addLabel:function(e){var t=this;this.$prompt("请输入param名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(s){var a=s.value;t.$set(e,a,"")})},edit_param:function(e,t,s){var a={};a.id=e,a[t]=C()(s),this.handleEdit(a)},get_apiCases:function(){var e,t,s,a=this,r={userId:this.userId,token:this.token,testType:this.testType};this.axios({baseURL:this.url,url:"api/v1/apiCase/",method:"get",params:r}).then(function(r){a.apiCases=r.data.results;for(var i=0;i<r.data.results.length;i++)e=r.data.results[i].apiparam?JSON.parse(r.data.results[i].apiparam):{},t=r.data.results[i].apijson?JSON.parse(r.data.results[i].apijson):{},s=r.data.results[i].apiresponse?JSON.parse(r.data.results[i].apiresponse):{},a.$set(a.params,r.data.results[i].id,e),a.$set(a.body,r.data.results[i].id,t),a.$set(a.response,r.data.results[i].id,s);a.pre=r.data.previous,a.pre?a.isPreDisabled=!1:a.isPreDisabled=!0,a.next=r.data.next,a.next?a.isNextDisabled=!1:a.isNextDisabled=!0},function(e){a.$message({message:"匿名用户，请先登录",type:"error",center:!0,showClose:!0}),a.$router.push("/")})},open_edit:function(e){this.dialogFormVisible=!0,this.editObj.id=e.id,this.editObj.apiname=e.apiname,this.editObj.apimethod=e.apimethod,this.editObj.apiurl=e.apiurl,this.editObj.index=e.index},handleEdit:function(e){var t=this;this.dialogFormVisible=!1;var s={userId:this.userId,token:this.token};this.axios({baseURL:this.url,url:"api/v1/apiCase/"+e.id+"/",method:"patch",params:s,data:e}).then(function(e){e.data.errcode?t.$message({message:"修改失败",type:"error",center:!0,showClose:!0}):(t.$message({message:"修改成功",type:"success",center:!0,showClose:!0}),t.get_apiCases())},function(e){t.$message({message:e.response.data,type:"error",center:!0,showClose:!0})})},handleDelete:function(e,t){var s=this;this.$confirm("此操作将永久删除该项, 是否继续?","提示",{distinguishCancelAndClose:!0,type:"warning",confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var e={userId:s.userId,token:s.token};s.axios({baseURL:s.url,url:"api/v1/apiCase/"+t.id+"/",method:"delete",params:e}).then(function(e){e.data.errcode?s.$message({message:"删除失败",type:"error",center:!0,showClose:!0}):(s.$message({message:"删除成功",type:"success",center:!0,showClose:!0}),s.get_apiCases())},function(e){s.$message({message:e.response.data,type:"error",center:!0,showClose:!0})})}).catch(function(){})},new_apicase:function(){var e=this,t={apiname:this.apiname,apiurl:this.apiurl,apimethod:this.editObj.apimethod,testType:this.testType,user:this.userId},s={userId:this.userId,token:this.token};this.axios({baseURL:this.url,url:"api/v1/apiCase/",method:"post",params:s,data:t}).then(function(t){t.data.errcode?e.$message({message:"新建失败",type:"error",center:!0,showClose:!0}):(e.$message({message:"添加成功",type:"success",center:!0,showClose:!0}),e.get_apiCases())},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})}),this.apiname="",this.apiurl="",this.editObj.apimethod=""},get_pre:function(){var e=this;this.axios.get(this.pre).then(function(t){if(t.data.errcode)e.$message({message:"加载失败",type:"error",center:!0,showClose:!0});else{e.$message({}),e.apiCases=t.data.results;for(var s=0;s<t.data.results.length;s++)t.data.results[s].apiparam?params=JSON.parse(t.data.results[s].apiparam):params={},t.data.results[s].apijson?body=JSON.parse(t.data.results[s].apijson):body={},t.data.results[s].apiresponse?response_obj=JSON.parse(t.data.results[s].apiresponse):response_obj={},e.$set(e.params,t.data.results[s].id,params),e.$set(e.body,t.data.results[s].id,body),e.$set(e.response,t.data.results[s].id,response_obj);e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0}},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})})},get_next:function(){var e=this;this.axios.get(this.next).then(function(t){if(t.data.errcode)e.$message({message:"加载失败",type:"error",center:!0,showClose:!0});else{e.$message({}),e.apiCases=t.data.results;for(var s=0;s<t.data.results.length;s++)t.data.results[s].apiparam?params=JSON.parse(t.data.results[s].apiparam):params={},t.data.results[s].apijson?body=JSON.parse(t.data.results[s].apijson):body={},t.data.results[s].apiresponse?response_obj=JSON.parse(t.data.results[s].apiresponse):response_obj={},e.$set(e.params,t.data.results[s].id,params),e.$set(e.body,t.data.results[s].id,body),e.$set(e.response,t.data.results[s].id,response_obj);e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0}},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})})}},beforeCreate:function(){},created:function(){this.get_apiCases()},filters:{dateFormat:function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}}},j={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.go_back(t)}}},[s("i",{staticClass:"el-icon-d-arrow-left"}),e._v("返回上一级")]),e._v(" "),s("br"),s("br"),e._v(" "),s("div",[s("el-button",{attrs:{type:"primary"},on:{click:e.new_apicase}},[e._v("添加API")]),e._v(" "),s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入名称"},model:{value:e.apiname,callback:function(t){e.apiname=t},expression:"apiname"}}),e._v(" "),s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入URL"},model:{value:e.apiurl,callback:function(t){e.apiurl=t},expression:"apiurl"}}),e._v(" "),s("el-select",{attrs:{placeholder:"请求方法"},model:{value:e.editObj.apimethod,callback:function(t){e.$set(e.editObj,"apimethod",t)},expression:"editObj.apimethod"}},e._l(e.method_options,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),s("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",loading:e.loading},on:{click:e.apiCaseTest}},[e._v(e._s(e.testBtn))]),e._v(" "),s("br"),s("br")],1),e._v(" "),s("el-table",{attrs:{border:"",stripe:"",data:e.apiCases.filter(function(t){return!e.search||t.apiname.toLowerCase().includes(e.search.toLowerCase())||t.apiurl.toLowerCase().includes(e.search.toLowerCase())}),"empty-text":"暂无项目","default-sort":{prop:"index",order:"ascending"},"header-cell-style":{background:"#ddd"},"highlight-current-row":""}},[s("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tabs",{attrs:{type:"border-card"}},[s("el-tab-pane",{attrs:{label:"Params"}},[s("el-form",{attrs:{"label-width":"100px"}},e._l(e.params[t.row.id],function(a,r){return s("el-form-item",{key:r,attrs:{label:r}},[s("el-input",{staticStyle:{width:"500px"},model:{value:e.params[t.row.id][r],callback:function(s){e.$set(e.params[t.row.id],r,s)},expression:"params[scope.row.id][key]"}}),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(s){return s.preventDefault(),e.removeLabel(e.params[t.row.id],r)}}})],1)}),1),e._v(" "),s("el-button",{staticClass:"el-icon-plus",attrs:{size:"mini",type:"primary"},on:{click:function(s){return e.addLabel(e.params[t.row.id])}}},[e._v("添加Param\r\n                        ")]),e._v(" "),s("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(s){return e.edit_param(t.row.id,"apiparam",e.params[t.row.id])}}},[e._v("提交修改\r\n                        ")])],1),e._v(" "),s("el-tab-pane",{attrs:{label:"Body"}},[s("el-form",{attrs:{"label-width":"100px"}},e._l(e.body[t.row.id],function(a,r){return s("el-form-item",{key:r,attrs:{label:r}},[s("el-input",{staticStyle:{width:"500px"},model:{value:e.body[t.row.id][r],callback:function(s){e.$set(e.body[t.row.id],r,s)},expression:"body[scope.row.id][key]"}}),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(s){return s.preventDefault(),e.removeLabel(e.body[t.row.id],r)}}})],1)}),1),e._v(" "),s("el-button",{staticClass:"el-icon-plus",attrs:{size:"mini",type:"primary"},on:{click:function(s){return e.addLabel(e.body[t.row.id])}}},[e._v("添加Param\r\n                        ")]),e._v(" "),s("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(s){return e.edit_param(t.row.id,"apijson",e.body[t.row.id])}}},[e._v("提交修改\r\n                        ")])],1),e._v(" "),s("el-tab-pane",{attrs:{label:"Response"}},[s("el-form",{attrs:{"label-width":"100px"}},e._l(e.response[t.row.id],function(a,r){return s("el-form-item",{key:r,attrs:{label:r}},[s("el-input",{staticStyle:{width:"500px"},model:{value:e.response[t.row.id][r],callback:function(s){e.$set(e.response[t.row.id],r,s)},expression:"response[scope.row.id][key]"}}),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(s){return s.preventDefault(),e.removeLabel(e.response[t.row.id],r)}}})],1)}),1),e._v(" "),s("el-button",{staticClass:"el-icon-plus",attrs:{size:"mini",type:"primary"},on:{click:function(s){return e.addLabel(e.response[t.row.id])}}},[e._v("添加Param\r\n                        ")]),e._v(" "),s("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(s){return e.edit_param(t.row.id,"apiresponse",e.response[t.row.id])}}},[e._v("提交修改\r\n                        ")])],1),e._v(" "),s("el-tab-pane",{attrs:{label:"测试数据"}},[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(s){return s.preventDefault(),e.apiTest(t.row)}}},[e._v("测试\r\n                    ")]),e._v(" "),s("br"),e._v(" "),s("pre",{staticStyle:{"font-size":"14px"},domProps:{textContent:e._s(t.row.testdata)}})],1)],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"",align:"center",prop:"index",width:"50px",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{label:"名称",align:"center",prop:"apiname"}}),e._v(" "),s("el-table-column",{attrs:{label:"请求方法",align:"center",prop:"apimethod"}}),e._v(" "),s("el-table-column",{attrs:{label:"URL",align:"center",prop:"apiurl"}}),e._v(" "),s("el-table-column",{attrs:{label:"测试结果",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.result?s("p",{staticStyle:{color:"green"}},[e._v("PASS")]):s("p",{staticStyle:{color:"red"}},[e._v("FAIL")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"最近修改",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",[e._v(e._s(e._f("dateFormat")(t.row.update_time)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[s("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[s("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(s){return e.open_edit(t.row)}}}),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}})]}}])})],1),e._v(" "),s("br"),e._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{attrs:{type:"primary",disabled:e.isPreDisabled},on:{click:e.get_pre}},[e._v("上一页")]),e._v(" "),s("el-button",{attrs:{type:"primary",disabled:e.isNextDisabled},on:{click:e.get_next}},[e._v("下一页")])],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",[s("el-form-item",{attrs:{label:"名称","label-width":"120px"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.editObj.apiname,callback:function(t){e.$set(e.editObj,"apiname",t)},expression:"editObj.apiname"}})],1)],1),e._v(" "),s("el-form",[s("el-form-item",{attrs:{label:"请求方法","label-width":"120px"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editObj.apimethod,callback:function(t){e.$set(e.editObj,"apimethod",t)},expression:"editObj.apimethod"}},e._l(e.method_options,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),s("el-form",[s("el-form-item",{attrs:{label:"URL","label-width":"120px"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.editObj.apiurl,callback:function(t){e.$set(e.editObj,"apiurl",t)},expression:"editObj.apiurl"}})],1)],1),e._v(" "),s("el-form",[s("el-form-item",{attrs:{label:"Index","label-width":"120px"}},[s("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.editObj.index,callback:function(t){e.$set(e.editObj,"index",t)},expression:"editObj.index"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleEdit(e.editObj)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var D=s("VU/8")($,j,!1,function(e){s("mMkV")},"data-v-e09de166",null).exports,I={name:"WebCase",data:function(){return{axios:this.axios,url:this.url,userId:this.storage.getItem("userId"),token:this.storage.getItem("token"),testBtn:"开始测试",loading:!1,webname:"",search:"",webCases:[],checkWebCases:[],pre:"",next:"",checkPre:"",checkNext:"",testType:this.$route.query.testType,weburl:this.$route.query.weburl,isNextDisabled:!1,isPreDisabled:!1,isCheckNextDisabled:!1,isCheckPreDisabled:!1,dialogFormVisible:!1,editObj:{id:"",webname:"",webcss:"",weboprate:"",webparam:"",index:"",type:"",checktext:""},activeName:""}},methods:{go_back:function(){this.$router.back(-1)},webTest:function(){var e=this;this.loading=!0,this.testBtn="测试中...";var t={userId:this.userId,token:this.token,testType:this.testType,url:this.weburl};this.axios({baseURL:this.url,url:"/api/v1/webCaseTest/",method:"get",params:t}).then(function(t){t.data.errcode?e.$message({message:t.data.errmsg,type:"error",center:!0,showClose:!0,duration:0}):e.$message({message:"PASS",type:"success",center:!0,showClose:!0,duration:0}),e.loading=!1,e.testBtn="开始测试"},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0,duration:0}),e.loading=!1,e.testBtn="开始测试"})},get_webCases:function(){var e=this,t={userId:this.userId,token:this.token,testType:this.testType};this.axios({baseURL:this.url,url:"api/v1/webCase/",method:"get",params:t}).then(function(t){e.webCases=t.data.results,e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0},function(t){e.$message({message:"匿名用户，请先登录",type:"error",center:!0,showClose:!0}),e.$router.push("/")})},get_checkWebCases:function(){var e=this,t={userId:this.userId,token:this.token,testType:this.testType};this.axios({baseURL:this.url,url:"api/v1/checkWebCase/",method:"get",params:t}).then(function(t){e.checkWebCases=t.data.results,e.checkPre=t.data.previous,e.checkPre?e.isCheckPreDisabled=!1:e.isCheckPreDisabled=!0,e.checkNext=t.data.next,e.checkNext?e.isCheckNextDisabled=!1:e.isCheckNextDisabled=!0},function(t){e.$message({message:"匿名用户，请先登录",type:"error",center:!0,showClose:!0}),e.$router.push("/")})},open_edit:function(e,t){this.dialogFormVisible=!0,this.editObj.id=e.id,this.editObj.webname=e.webname,this.editObj.webcss=e.webcss,this.editObj.weboprate=e.weboprate,this.editObj.webparam=e.webparam,this.editObj.index=e.index,this.editObj.type=t,"check"==t&&(this.editObj.checktext=e.checktext)},handleEdit:function(e){var t=this;this.dialogFormVisible=!1;var s={userId:this.userId,token:this.token},a="api/v1/webCase/"+e.id+"/";"check"==e.type&&(a="api/v1/checkWebCase/"+e.id+"/"),this.axios({baseURL:this.url,url:a,method:"patch",params:s,data:e}).then(function(e){e.data.errcode?t.$message({message:"修改失败",type:"error",center:!0,showClose:!0}):(t.$message({message:"修改成功",type:"success",center:!0,showClose:!0}),t.get_webCases(),t.get_checkWebCases())},function(e){t.$message({message:e.response.data,type:"error",center:!0,showClose:!0})})},handleDelete:function(e,t,s){var a=this;this.$confirm("此操作将永久删除该项, 是否继续?","提示",{distinguishCancelAndClose:!0,type:"warning",confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var e={userId:a.userId,token:a.token},r="api/v1/webCase/"+t.id+"/";"check"==s&&(r="api/v1/checkWebCase/"+t.id+"/"),a.axios({baseURL:a.url,url:r,method:"delete",params:e}).then(function(e){e.data.errcode?a.$message({message:"删除失败",type:"error",center:!0,showClose:!0}):(a.$message({message:"删除成功",type:"success",center:!0,showClose:!0}),a.get_webCases(),a.get_checkWebCases())},function(e){a.$message({message:e.response.data,type:"error",center:!0,showClose:!0})})})},new_webcase:function(e){var t=this,s={webname:this.webname,testType:this.testType,user:this.userId},a="api/v1/webCase/";"check"==e&&(a="api/v1/checkWebCase/");var r={userId:this.userId,token:this.token};this.axios({baseURL:this.url,url:a,method:"post",params:r,data:s}).then(function(e){e.data.errcode?t.$message({message:"新建失败",type:"error",center:!0,showClose:!0}):(t.$message({message:"添加成功",type:"success",center:!0,showClose:!0}),t.get_webCases(),t.get_checkWebCases())},function(e){t.$message({message:e.response.data,type:"error",center:!0,showClose:!0})}),this.webname=""},get_pre:function(){var e=this;this.axios.get(this.pre).then(function(t){t.data.errcode?e.$message({message:"加载失败",type:"error",center:!0,showClose:!0}):(e.webCases=t.data.results,e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0)},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})})},get_checkPre:function(){var e=this;this.axios.get(this.checkPre).then(function(t){t.data.errcode?e.$message({message:"加载失败",type:"error",center:!0,showClose:!0}):(e.checkWebCases=t.data.results,e.checkPre=t.data.previous,e.checkPre?e.isCheckPreDisabled=!1:e.isCheckPreDisabled=!0,e.checkNext=t.data.next,e.checkNext?e.isCheckNextDisabled=!1:e.isCheckNextDisabled=!0)},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})})},get_next:function(){var e=this;this.axios.get(this.next).then(function(t){t.data.errcode?e.$message({message:"加载失败",type:"error",center:!0,showClose:!0}):(e.webCases=t.data.results,e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0)},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})})},get_checkNext:function(){var e=this;this.axios.get(this.checkNext).then(function(t){t.data.errcode?e.$message({message:"加载失败",type:"error",center:!0,showClose:!0}):(e.checkWebCases=t.data.results,e.checkPre=t.data.previous,e.checkPre?e.isCheckPreDisabled=!1:e.isCheckPreDisabled=!0,e.checkNext=t.data.next,e.checkNext?e.isCheckNextDisabled=!1:e.isCheckNextDisabled=!0)},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})})}},beforeCreate:function(){},created:function(){this.get_webCases(),this.get_checkWebCases()},filters:{dateFormat:function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}}},S={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.go_back(t)}}},[s("i",{staticClass:"el-icon-d-arrow-left"}),e._v("返回上一级")]),e._v(" "),s("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.webTest()}}},[e._v(e._s(e.testBtn))]),e._v(" "),s("br"),s("br"),s("br"),e._v(" "),s("el-collapse",{attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-collapse-item",{attrs:{title:"操作步骤",name:"1"}},[s("div",[s("el-button",{attrs:{type:"primary"},on:{click:e.new_webcase}},[e._v("添加步骤")]),e._v(" "),s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入名称"},model:{value:e.webname,callback:function(t){e.webname=t},expression:"webname"}}),e._v(" "),s("br"),s("br")],1),e._v(" "),s("el-table",{attrs:{border:"",stripe:"",data:e.webCases.filter(function(t){return!e.search||t.webname.toLowerCase().includes(e.search.toLowerCase())}),"empty-text":"暂无项目","default-sort":{prop:"index",order:"ascending"},"header-cell-style":{background:"#ddd"},"highlight-current-row":""}},[s("el-table-column",{attrs:{label:"",align:"center",prop:"index",width:"50px",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{label:"步骤",align:"center",prop:"webname"}}),e._v(" "),s("el-table-column",{attrs:{label:"CSS选择器",align:"center",prop:"webcss"}}),e._v(" "),s("el-table-column",{attrs:{label:"元素操作",align:"center",prop:"weboprate"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作参数",align:"center",prop:"webparam"}}),e._v(" "),s("el-table-column",{attrs:{label:"最近修改",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",[e._v(e._s(e._f("dateFormat")(t.row.update_time)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[s("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[s("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(s){return e.open_edit(t.row)}}}),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}})]}}])})],1),e._v(" "),s("br"),e._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{attrs:{type:"primary",disabled:e.isPreDisabled},on:{click:e.get_pre}},[e._v("上一页")]),e._v(" "),s("el-button",{attrs:{type:"primary",disabled:e.isNextDisabled},on:{click:e.get_next}},[e._v("下一页")])],1)],1),e._v(" "),s("el-collapse-item",{attrs:{title:"操作验证",name:"2"}},[s("div",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.new_webcase("check")}}},[e._v("添加验证")]),e._v(" "),s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入名称"},model:{value:e.webname,callback:function(t){e.webname=t},expression:"webname"}}),e._v(" "),s("br"),s("br")],1),e._v(" "),s("el-table",{attrs:{border:"",stripe:"",data:e.checkWebCases.filter(function(t){return!e.search||t.webname.toLowerCase().includes(e.search.toLowerCase())}),"empty-text":"暂无项目","default-sort":{prop:"index",order:"ascending"},"header-cell-style":{background:"#ddd"},"highlight-current-row":""}},[s("el-table-column",{attrs:{label:"",align:"center",prop:"index",width:"50px",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{label:"验证",align:"center",prop:"webname"}}),e._v(" "),s("el-table-column",{attrs:{label:"CSS选择器",align:"center",prop:"webcss"}}),e._v(" "),s("el-table-column",{attrs:{label:"元素操作",align:"center",prop:"weboprate"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作参数",align:"center",prop:"webparam"}}),e._v(" "),s("el-table-column",{attrs:{label:"验证数据",align:"center",prop:"checktext"}}),e._v(" "),s("el-table-column",{attrs:{label:"最近修改",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",[e._v(e._s(e._f("dateFormat")(t.row.update_time)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[s("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[s("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(s){return e.open_edit(t.row,"check")}}}),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row,"check")}}})]}}])})],1),e._v(" "),s("br"),e._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{attrs:{type:"primary",disabled:e.isCheckPreDisabled},on:{click:e.get_checkPre}},[e._v("上一页")]),e._v(" "),s("el-button",{attrs:{type:"primary",disabled:e.isCheckNextDisabled},on:{click:e.get_checkNext}},[e._v("下一页")])],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",[s("el-form-item",{attrs:{label:"步骤","label-width":"120px"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.editObj.webname,callback:function(t){e.$set(e.editObj,"webname",t)},expression:"editObj.webname"}})],1)],1),e._v(" "),s("el-form",[s("el-form-item",{attrs:{label:"Css选择器","label-width":"120px"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.editObj.webcss,callback:function(t){e.$set(e.editObj,"webcss",t)},expression:"editObj.webcss"}})],1)],1),e._v(" "),s("el-form",[s("el-form-item",{attrs:{label:"元素操作","label-width":"120px"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.editObj.weboprate,callback:function(t){e.$set(e.editObj,"weboprate",t)},expression:"editObj.weboprate"}})],1)],1),e._v(" "),s("el-form",[s("el-form-item",{attrs:{label:"操作参数","label-width":"120px"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.editObj.webparam,callback:function(t){e.$set(e.editObj,"webparam",t)},expression:"editObj.webparam"}})],1)],1),e._v(" "),e.editObj.type?s("el-form",[s("el-form-item",{attrs:{label:"验证数据","label-width":"120px"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.editObj.checktext,callback:function(t){e.$set(e.editObj,"checktext",t)},expression:"editObj.checktext"}})],1)],1):e._e(),e._v(" "),s("el-form",[s("el-form-item",{attrs:{label:"Index","label-width":"120px"}},[s("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.editObj.index,callback:function(t){e.$set(e.editObj,"index",t)},expression:"editObj.index"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleEdit(e.editObj)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var O=s("VU/8")(I,S,!1,function(e){s("20Bb")},"data-v-001bc511",null).exports,P={name:"WebType",data:function(){return{axios:this.axios,url:this.url,userId:this.storage.getItem("userId"),token:this.storage.getItem("token"),testBtn:"开始测试",loading:!1,typename:"",typedes:"",search:"",testtypes:[],pre:"",next:"",isNextDisabled:!1,isPreDisabled:!1,content_type:this.$route.query.content_type,object_id:this.$route.query.object_id,weburl:this.$route.query.weburl,dialogFormVisible:!1,editObj:{id:"",index:"",typename:"",typedes:"",is_test:""}}},methods:{go_back:function(){this.$router.back(-1)},webTest:function(){var e=this;this.loading=!0,this.testBtn="测试中...";var t={userId:this.userId,token:this.token,object_id:this.object_id,content_type:this.content_type,url:this.weburl};this.axios({baseURL:this.url,url:"/api/v1/webTypeTest/",method:"get",params:t}).then(function(t){t.data.errcode?e.$message({message:t.data.errmsg,type:"error",center:!0,showClose:!0,duration:0}):e.$message({message:"PASS",type:"success",center:!0,showClose:!0,duration:0}),e.get_testtypes(),e.loading=!1,e.testBtn="开始测试",e.get_testtypes()},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0,duration:0}),e.get_testtypes(),e.loading=!1,e.testBtn="开始测试"})},get_testtypes:function(){var e=this,t={userId:this.userId,token:this.token,object_id:this.object_id,content_type:this.content_type};this.axios({baseURL:this.url,url:"api/v1/testType/",method:"get",params:t}).then(function(t){e.testtypes=t.data.results,e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0},function(t){e.$message({message:"匿名用户，请先登录",type:"error",center:!0,showClose:!0}),e.$router.push("/")})},open_edit:function(e){this.dialogFormVisible=!0,this.editObj.id=e.id,this.editObj.index=e.index,this.editObj.typename=e.typename,this.editObj.typedes=e.typedes,this.editObj.is_test=e.is_test},handleEdit:function(e){var t=this;this.dialogFormVisible=!1;var s={userId:this.userId,token:this.token};this.axios({baseURL:this.url,url:"api/v1/testType/"+e.id+"/",method:"patch",params:s,data:e}).then(function(e){e.data.errcode?t.$message({message:"修改失败",type:"error",center:!0,showClose:!0}):(t.$message({message:"修改成功",type:"success",center:!0,showClose:!0}),t.get_testtypes())},function(e){t.$message({message:e.response.data,type:"error",center:!0,showClose:!0})})},handleDelete:function(e,t){var s=this;this.$confirm("此操作将永久删除该项, 是否继续?","提示",{distinguishCancelAndClose:!0,type:"warning",confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var e={userId:s.userId,token:s.token};s.axios({baseURL:s.url,url:"api/v1/testType/"+t.id+"/",method:"delete",params:e}).then(function(e){e.data.errcode?s.$message({message:"删除失败",type:"error",center:!0,showClose:!0}):(s.$message({message:"删除成功",type:"success",center:!0,showClose:!0}),s.get_testtypes())},function(e){s.$message({message:e.response.data,type:"error",center:!0,showClose:!0})})}).catch(function(){})},new_webcase:function(){var e=this,t={typename:this.typename,typedes:this.typedes,object_id:this.object_id,content_type:this.content_type,user:this.userId},s={userId:this.userId,token:this.token};this.axios({baseURL:this.url,url:"api/v1/testType/",method:"post",params:s,data:t}).then(function(t){t.data.errcode?e.$message({message:"添加失败",type:"error",center:!0,showClose:!0}):(e.$message({message:"添加成功",type:"success",center:!0,showClose:!0}),e.get_testtypes())},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})}),this.typename="",this.typedes=""},get_pre:function(){var e=this;this.axios.get(this.pre).then(function(t){t.data.errcode?e.$message({message:"加载失败",type:"error",center:!0,showClose:!0}):(e.testtypes=t.data.results,e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0)},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})})},get_next:function(){var e=this;this.axios.get(this.next).then(function(t){t.data.errcode?e.$message({message:"加载失败",type:"error",center:!0,showClose:!0}):(e.testtypes=t.data.results,e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0)},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})})},go_webTest:function(e){this.$router.push({path:"/home/webCase/",query:{testType:e,weburl:this.weburl}})}},beforeCreate:function(){},created:function(){this.get_testtypes()},filters:{dateFormat:function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}}},L={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.go_back(t)}}},[s("i",{staticClass:"el-icon-d-arrow-left"}),e._v("返回上一级"),s("br"),s("br")]),e._v(" "),s("div",[s("el-button",{attrs:{type:"primary"},on:{click:e.new_webcase}},[e._v("添加分类")]),e._v(" "),s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入名称"},model:{value:e.typename,callback:function(t){e.typename=t},expression:"typename"}}),e._v(" "),s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入描述"},model:{value:e.typedes,callback:function(t){e.typedes=t},expression:"typedes"}}),e._v(" "),s("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",loading:e.loading},on:{click:e.webTest}},[e._v(e._s(e.testBtn))]),e._v(" "),s("br"),s("br")],1),e._v(" "),s("el-table",{attrs:{stripe:"",border:"",data:e.testtypes.filter(function(t){return!e.search||t.typename.toLowerCase().includes(e.search.toLowerCase())||t.typedes.toLowerCase().includes(e.search.toLowerCase())}),"empty-text":"暂无项目","header-cell-style":{background:"#ddd"},"default-sort":{prop:"index",order:"ascending"},"highlight-current-row":""}},[s("el-table-column",{attrs:{label:"",align:"center",prop:"is_test",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("input",{attrs:{type:"checkbox",disabled:""},domProps:{checked:e.row.is_test}})]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"",align:"center",prop:"index",width:"50px",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{label:"名称",align:"center",prop:"typename"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("a",{attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.go_webTest(t.row.id)}}},[s("p",[e._v(e._s(t.row.typename))])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"描述",align:"center",prop:"typedes"}}),e._v(" "),s("el-table-column",{attrs:{label:"测试",align:"center",prop:"result"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.result?s("p",{staticStyle:{color:"green"}},[e._v("PASS")]):s("p",{staticStyle:{color:"red"}},[e._v("FAIL")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"最近修改",align:"center",prop:"update_time"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",[e._v(e._s(e._f("dateFormat")(t.row.update_time)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[s("el-input",{attrs:{size:"mini",placeholder:"输入名称关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[s("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(s){return e.open_edit(t.row)}}}),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}})]}}])})],1),e._v(" "),s("br"),e._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{attrs:{type:"primary",disabled:e.isPreDisabled},on:{click:e.get_pre}},[e._v("上一页")]),e._v(" "),s("el-button",{attrs:{type:"primary",disabled:e.isNextDisabled},on:{click:e.get_next}},[e._v("下一页")])],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",[s("el-form-item",{attrs:{label:"名称","label-width":"120px"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.editObj.typename,callback:function(t){e.$set(e.editObj,"typename",t)},expression:"editObj.typename"}})],1)],1),e._v(" "),s("el-form",[s("el-form-item",{attrs:{label:"描述","label-width":"120px"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.editObj.typedes,callback:function(t){e.$set(e.editObj,"typedes",t)},expression:"editObj.typedes"}})],1)],1),e._v(" "),s("el-form",[s("el-form-item",{attrs:{label:"优先级","label-width":"120px"}},[s("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.editObj.index,callback:function(t){e.$set(e.editObj,"index",t)},expression:"editObj.index"}})],1)],1),e._v(" "),s("el-form",[s("el-form-item",{attrs:{label:"是否测试","label-width":"120px"}},[s("el-checkbox",{model:{value:e.editObj.is_test,callback:function(t){e.$set(e.editObj,"is_test",t)},expression:"editObj.is_test"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleEdit(e.editObj)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var N=s("VU/8")(P,L,!1,function(e){s("80YH")},"data-v-ce6df02c",null).exports,T={name:"ApiType",data:function(){return{axios:this.axios,url:this.url,userId:this.storage.getItem("userId"),token:this.storage.getItem("token"),testBtn:"开始测试",loading:!1,typename:"",typedes:"",search:"",testtypes:[],pre:"",next:"",isNextDisabled:!1,isPreDisabled:!1,content_type:this.$route.query.content_type,object_id:this.$route.query.object_id,apiurl:this.$route.query.apiurl,dialogFormVisible:!1,editObj:{id:"",index:"",typename:"",typedes:"",is_test:""}}},methods:{go_back:function(){this.$router.back(-1)},apiTest:function(){var e=this;this.loading=!0,this.testBtn="测试中...";var t={userId:this.userId,token:this.token,object_id:this.object_id,content_type:this.content_type,url:this.apiurl};this.axios({baseURL:this.url,url:"/api/v1/apiTypeTest/",method:"get",params:t}).then(function(t){t.data.errcode?e.$message({message:t.data.errmsg,type:"error",center:!0,showClose:!0}):e.$message({message:"PASS",type:"success",center:!0,showClose:!0}),e.loading=!1,e.testBtn="开始测试",e.get_testtypes()},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0}),e.get_testtypes(),e.loading=!1,e.testBtn="开始测试"})},get_testtypes:function(){var e=this,t={userId:this.userId,token:this.token,object_id:this.object_id,content_type:this.content_type};this.axios({baseURL:this.url,url:"api/v1/testType/",method:"get",params:t}).then(function(t){e.testtypes=t.data.results,e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0},function(t){e.$message({message:"匿名用户，请先登录",type:"error",center:!0,showClose:!0}),e.$router.push("/")})},open_edit:function(e){this.dialogFormVisible=!0,this.editObj.id=e.id,this.editObj.index=e.index,this.editObj.typename=e.typename,this.editObj.typedes=e.typedes,this.editObj.is_test=e.is_test},handleEdit:function(e){var t=this;this.dialogFormVisible=!1;var s={userId:this.userId,token:this.token};this.axios({baseURL:this.url,url:"api/v1/testType/"+e.id+"/",method:"patch",params:s,data:e}).then(function(e){e.data.errcode?t.$message({message:"修改失败",type:"error",center:!0,showClose:!0}):(t.$message({message:"修改成功",type:"success",center:!0,showClose:!0}),t.get_testtypes())},function(e){t.$message({message:e.response.data,type:"error",center:!0,showClose:!0})})},handleDelete:function(e,t){var s=this;this.$confirm("此操作将永久删除该项, 是否继续?","提示",{distinguishCancelAndClose:!0,type:"warning",confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var e={userId:s.userId,token:s.token};s.axios({baseURL:s.url,url:"api/v1/testType/"+t.id+"/",method:"delete",params:e}).then(function(e){e.data.errcode?s.$message({message:"删除失败",type:"error",center:!0,showClose:!0}):(s.$message({message:"删除成功",type:"success",center:!0,showClose:!0}),s.get_testtypes())},function(e){s.$message({message:e.response.data,type:"error",center:!0,showClose:!0})})}).catch(function(){})},new_webcase:function(){var e=this,t={typename:this.typename,typedes:this.typedes,object_id:this.object_id,content_type:this.content_type,user:this.userId},s={userId:this.userId,token:this.token};this.axios({baseURL:this.url,url:"api/v1/testType/",method:"post",params:s,data:t}).then(function(t){t.data.errcode?e.$message({message:"添加失败",type:"error",center:!0,showClose:!0}):(e.$message({message:"添加成功",type:"success",center:!0,showClose:!0}),e.get_testtypes())},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})}),this.typename="",this.typedes=""},get_pre:function(){var e=this;this.axios.get(this.pre).then(function(t){t.data.errcode?e.$message({message:"加载失败",type:"error",center:!0,showClose:!0}):(e.testtypes=t.data.results,e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0)},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})})},get_next:function(){var e=this;this.axios.get(this.next).then(function(t){t.data.errcode?e.$message({message:"加载失败",type:"error",center:!0,showClose:!0}):(e.testtypes=t.data.results,e.pre=t.data.previous,e.pre?e.isPreDisabled=!1:e.isPreDisabled=!0,e.next=t.data.next,e.next?e.isNextDisabled=!1:e.isNextDisabled=!0)},function(t){e.$message({message:t.response.data,type:"error",center:!0,showClose:!0})})},go_apiTest:function(e){this.$router.push({path:"/home/apiCase/",query:{testType:e,weburl:this.apiurl}})}},beforeCreate:function(){},created:function(){this.get_testtypes()},filters:{dateFormat:function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}}},M={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.go_back(t)}}},[s("i",{staticClass:"el-icon-d-arrow-left"}),e._v("返回上一级"),s("br"),s("br")]),e._v(" "),s("div",[s("el-button",{attrs:{type:"primary"},on:{click:e.new_webcase}},[e._v("添加分类")]),e._v(" "),s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入名称"},model:{value:e.typename,callback:function(t){e.typename=t},expression:"typename"}}),e._v(" "),s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入描述"},model:{value:e.typedes,callback:function(t){e.typedes=t},expression:"typedes"}}),e._v(" "),s("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",loading:e.loading},on:{click:e.apiTest}},[e._v(e._s(e.testBtn))]),e._v(" "),s("br"),s("br")],1),e._v(" "),s("el-table",{attrs:{stripe:"",border:"",data:e.testtypes.filter(function(t){return!e.search||t.typename.toLowerCase().includes(e.search.toLowerCase())||t.typedes.toLowerCase().includes(e.search.toLowerCase())}),"empty-text":"暂无项目","header-cell-style":{background:"#ddd"},"default-sort":{prop:"index",order:"ascending"},"highlight-current-row":""}},[s("el-table-column",{attrs:{label:"",align:"center",prop:"is_test",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("input",{attrs:{type:"checkbox",disabled:""},domProps:{checked:e.row.is_test}})]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"",align:"center",prop:"index",width:"50px",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{label:"名称",align:"center",prop:"typename"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("a",{attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.go_apiTest(t.row.id)}}},[s("p",[e._v(e._s(t.row.typename))])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"描述",align:"center",prop:"typedes"}}),e._v(" "),s("el-table-column",{attrs:{label:"测试",align:"center",prop:"result"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.result?s("p",{staticStyle:{color:"green"}},[e._v("PASS")]):s("p",{staticStyle:{color:"red"}},[e._v("FAIL")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"最近修改",align:"center",prop:"update_time"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",[e._v(e._s(e._f("dateFormat")(t.row.update_time)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[s("el-input",{attrs:{size:"mini",placeholder:"输入名称关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[s("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(s){return e.open_edit(t.row)}}}),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}})]}}])})],1),e._v(" "),s("br"),e._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{attrs:{type:"primary",disabled:e.isPreDisabled},on:{click:e.get_pre}},[e._v("上一页")]),e._v(" "),s("el-button",{attrs:{type:"primary",disabled:e.isNextDisabled},on:{click:e.get_next}},[e._v("下一页")])],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",[s("el-form-item",{attrs:{label:"名称","label-width":"120px"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.editObj.typename,callback:function(t){e.$set(e.editObj,"typename",t)},expression:"editObj.typename"}})],1)],1),e._v(" "),s("el-form",[s("el-form-item",{attrs:{label:"描述","label-width":"120px"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.editObj.typedes,callback:function(t){e.$set(e.editObj,"typedes",t)},expression:"editObj.typedes"}})],1)],1),e._v(" "),s("el-form",[s("el-form-item",{attrs:{label:"优先级","label-width":"120px"}},[s("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.editObj.index,callback:function(t){e.$set(e.editObj,"index",t)},expression:"editObj.index"}})],1)],1),e._v(" "),s("el-form",[s("el-form-item",{attrs:{label:"是否测试","label-width":"120px"}},[s("el-checkbox",{model:{value:e.editObj.is_test,callback:function(t){e.$set(e.editObj,"is_test",t)},expression:"editObj.is_test"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleEdit(e.editObj)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var F=s("VU/8")(T,M,!1,function(e){s("efFZ")},"data-v-6275d1ed",null).exports,R={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-row",[t("el-col",{attrs:{span:10}},[t("ve-histogram",{attrs:{data:this.chartData}})],1)],1)},staticRenderFns:[]},U=s("VU/8")({name:"Record",data:function(){return{axios:this.axios,url:this.url,userId:this.storage.getItem("userId"),token:this.storage.getItem("token"),chartData:{columns:["日期","测试总数","PASS","FAIL"],rows:[{"日期":"2018-05-22","测试总数":10,PASS:6,FAIL:4},{"日期":"2018-05-23","测试总数":10,PASS:5,FAIL:5},{"日期":"2018-05-24","测试总数":10,PASS:4,FAIL:6}]}}},methods:{get_records:function(){var e=this,t={userId:this.userId,token:this.token,projectId:52};this.axios({baseURL:this.url,url:"api/v1/getRecord/",method:"get",params:t}).then(function(t){e.chartData.rows=t.data.records},function(t){e.$message({message:"匿名用户，请先登录",type:"error",center:!0,showClose:!0})})}},created:function(){this.get_records()}},R,!1,null,null,null).exports;a.default.use(n.a);var A=new n.a({routes:[{path:"/",redirect:"/login/"},{path:"/login/",name:"Login",component:c},{path:"/home/",component:u,children:[{path:"",redirect:"user"},{path:"user",component:h},{path:"project",component:g},{path:"webManager/:projectId?",component:_},{path:"apiManager/:projectId?",component:x},{path:"apiCase/:apiManagerId?",component:D},{path:"webCase/:webManagerId?",component:O},{path:"webType/:webManagerId?",component:N},{path:"apiType/:webManagerId?",component:F},{path:"record/:webManagerId?",component:U}]}]}),V=s("zL8q"),B=s.n(V),z=(s("tvR6"),s("mtWM")),q=s.n(z),H=(s("CuRo"),s("7xIN"),s("vO7p")),E=s.n(H);a.default.use(B.a),a.default.use(E.a),a.default.config.productionTip=!1,a.default.prototype.url="http://127.0.0.1:8000/",a.default.prototype.axios=q.a,a.default.prototype.storage=window.localStorage,a.default.prototype.path="",new a.default({el:"#app",router:A,components:{App:i},template:"<App/>"})},Y7Ud:function(e,t){},dQyJ:function(e,t){},efFZ:function(e,t){},m8bA:function(e,t){},mMkV:function(e,t){},qCPP:function(e,t){},tvR6:function(e,t){},vPTb:function(e,t){},"xzo/":function(e,t,s){e.exports=s.p+"static/img/login-img.ca4e6fe.png"}},["NHnr"]);
//# sourceMappingURL=app.7942b8c5903c4171393c.js.map